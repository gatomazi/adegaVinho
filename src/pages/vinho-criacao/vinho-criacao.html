<ion-header>
  <ion-navbar>
    <ion-title>{{ "ITEM_CREATE_TITLE" | translate }}</ion-title>
    <ion-buttons start>
      <button class="action-button" ion-button (click)="cancel()">
        <span color="primary" showWhen="ios">
          {{ "CANCEL_BUTTON" | translate }}
        </span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons end>
      <button
        class="action-button"
        ion-button
        (click)="done()"
        [disabled]="!isReadyToSave"
        strong
      >
        <span color="primary" showWhen="ios">
          {{ "DONE_BUTTON" | translate }}
        </span>
        <ion-icon
          name="md-checkmark"
          showWhen="core,android,windows"
        ></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <form *ngIf="form" [formGroup]="form" (ngSubmit)="createItem()">
    <input
      type="file"
      #fileInput
      style="visibility: hidden; height: 0px"
      name="files[]"
      (change)="processWebImage($event)"
    />
    <div class="profile-image-wrapper" (click)="updatePicture()">
      <div
        class="profile-image-placeholder"
        *ngIf="!this.form.controls.imagem.value"
      >
        <ion-icon name="add"></ion-icon>
        <div>
          {{ "ITEM_CREATE_CHOOSE_IMAGE" | translate }}
        </div>
      </div>
      <div
        class="profile-image"
        [style.backgroundImage]="getProfileImageStyle()"
        *ngIf="this.form.controls.imagem.value"
      ></div>
    </div>
    <ion-list>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_NAME_PLACEHOLDER' | translate }}"
          formControlName="nome"
          [(ngModel)]="item.nome"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_SAFRA_PLACEHOLDER' | translate }}"
          formControlName="safra"
          [(ngModel)]="item.safra"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_PAIS_PLACEHOLDER' | translate }}"
          formControlName="pais"
          [(ngModel)]="item.pais"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_REGIAO_PLACEHOLDER' | translate }}"
          formControlName="regiao"
          [(ngModel)]="item.regiao"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_PRODUTOR_PLACEHOLDER' | translate }}"
          formControlName="produtor"
          [(ngModel)]="item.produtor"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_QTD_PLACEHOLDER' | translate }}"
          formControlName="qtd"
          [(ngModel)]="item.qtd"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_TEORALC_PLACEHOLDER' | translate }}"
          formControlName="teorAlc"
          [(ngModel)]="item.teorAlc"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_TIPOVINHO_PLACEHOLDER' | translate }}"
          formControlName="tipoVinho"
          [(ngModel)]="item.tipoVinho"
        ></ion-input>
      </ion-item>
      <ion-item>
        <ion-input
          type="text"
          placeholder="{{ 'ITEM_UVA_PLACEHOLDER' | translate }}"
          formControlName="uva"
          [(ngModel)]="item.uva"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-textarea
          placeholder="{{ 'ITEM_ABOUT_PLACEHOLDER' | translate }}"
          formControlName="descricao"
          [(ngModel)]="item.descricao"
        ></ion-textarea>
      </ion-item>
    </ion-list>
  </form>
</ion-content>
